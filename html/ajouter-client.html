<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un Client - ISOLAB Agri Support</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">ISOLAB Agri Support</h2>
                <p class="sidebar-subtitle">Système de gestion</p>
            </div>
            <ul class="sidebar-nav">
                <li><a href="dashboard.html" id="nav-dashboard"><i class="fas fa-home"></i> Tableau de bord</a></li>
                <li><a href="voir-machines.html" id="nav-machines"><i class="fas fa-cogs"></i> Voir les machines</a></li>
                <li><a href="clients.html" id="nav-clients"><i class="fas fa-users"></i> Clients</a></li>
                <li><a href="ajouter-client.html" id="nav-add-client" class="active"><i class="fas fa-user-plus"></i> Ajouter Client</a></li>
                <li><a href="ajouter-machine.html" id="nav-add-machine"><i class="fas fa-plus-circle"></i> Ajouter Machine</a></li>
                <li><a href="../index.html" id="nav-logout"><i class="fas fa-sign-out-alt"></i> Déconnexion</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">Ajouter un Nouveau Client</h1>
                <p class="page-subtitle">Créer une nouvelle fiche client</p>
            </div>

            <!-- Add Client Form -->
            <div class="content-box">
                <form id="addClientForm" class="add-client-form">
                    <div class="form-grid">
                        <!-- Company Information Section -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-building"></i> Informations de l'entreprise
                            </h3>
                            
                            <div class="form-group">
                                <label class="form-label" for="society">
                                    <i class="fas fa-building"></i> Nom de la société *
                                </label>
                                <input type="text" id="society" name="society" class="form-input" required
                                       placeholder="Ex: Huilerie Amna, BTK Leasing...">
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="fiscalNumber">
                                    <i class="fas fa-hashtag"></i> Matricule fiscale *
                                </label>
                                <input type="text" id="fiscalNumber" name="fiscalNumber" class="form-input" required
                                       placeholder="Ex: 1687750ENM000">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="clientType">
                                        <i class="fas fa-tags"></i> Type de client *
                                    </label>
                                    <select id="clientType" name="clientType" class="form-input" required>
                                        <option value="">Sélectionner un type</option>
                                        <option value="leasing">Leasing</option>
                                        <option value="direct">Direct</option>
                                        <option value="agri">Agri</option>
                                        <option value="tunisie">Tunisie</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label" for="status">
                                        <i class="fas fa-circle"></i> Statut
                                    </label>
                                    <select id="status" name="status" class="form-input">
                                        <option value="actif">Actif</option>
                                        <option value="inactif">Inactif</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Information Section -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-user"></i> Informations de contact
                            </h3>
                            
                            <div class="form-group">
                                <label class="form-label" for="manager">
                                    <i class="fas fa-user-tie"></i> Gérant / Responsable *
                                </label>
                                <input type="text" id="manager" name="manager" class="form-input" required
                                       placeholder="Ex: Mohamed Bibi, Daly Bujelbène...">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="phone">
                                        <i class="fas fa-phone"></i> Téléphone *
                                    </label>
                                    <input type="tel" id="phone" name="phone" class="form-input" required
                                           placeholder="Ex: 24298000, 98796145...">
                                </div>

                                <div class="form-group">
                                    <label class="form-label" for="email">
                                        <i class="fas fa-envelope"></i> Email
                                    </label>
                                    <input type="email" id="email" name="email" class="form-input"
                                           placeholder="Ex: client@example.com">
                                </div>
                            </div>
                        </div>

                        <!-- Address Information Section -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-map-marker-alt"></i> Adresse et localisation
                            </h3>
                            
                            <div class="form-group">
                                <label class="form-label" for="address">
                                    <i class="fas fa-home"></i> Adresse complète *
                                </label>
                                <textarea id="address" name="address" class="form-input" rows="3" required
                                          placeholder="Ex: Cité el maaser Mahres sfax, Rte El Matar Sfax..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="location">
                                    <i class="fas fa-map-pin"></i> Localisation / Région *
                                </label>
                                <select id="location" name="location" class="form-input" required>
                                    <option value="">Sélectionner une région</option>
                                    <option value="sfax">Sfax</option>
                                    <option value="sidi-bouzid">Sidi Bouzid</option>
                                    <option value="sousse">Sousse</option>
                                    <option value="tunis">Tunis</option>
                                    <option value="beja">Béja</option>
                                    <option value="siliana">Siliana</option>
                                    <option value="mahdia">Mahdia</option>
                                    <option value="zaghouan">Zaghouan</option>
                                    <option value="autres">Autres</option>
                                </select>
                            </div>
                        </div>

                        <!-- Payment Information Section -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-euro-sign"></i> Informations de paiement
                            </h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="paymentMode">
                                        <i class="fas fa-credit-card"></i> Mode de paiement
                                    </label>
                                    <select id="paymentMode" name="paymentMode" class="form-input">
                                        <option value="">Sélectionner un mode</option>
                                        <option value="comptant">Comptant</option>
                                        <option value="cheque">Chèque</option>
                                        <option value="virement">Virement</option>
                                        <option value="leasing">Leasing</option>
                                        <option value="echeance">Échéance</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label" for="paymentStatus">
                                        <i class="fas fa-check-circle"></i> Statut du paiement
                                    </label>
                                    <select id="paymentStatus" name="paymentStatus" class="form-input">
                                        <option value="">Sélectionner un statut</option>
                                        <option value="paye">Payé</option>
                                        <option value="en-attente">En attente</option>
                                        <option value="partiel">Partiel</option>
                                        <option value="retard">En retard</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Information Section -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-info-circle"></i> Informations supplémentaires
                            </h3>
                            
                            <div class="form-group">
                                <label class="form-label" for="notes">
                                    <i class="fas fa-sticky-note"></i> Notes et remarques
                                </label>
                                <textarea id="notes" name="notes" class="form-input" rows="4"
                                          placeholder="Notes, remarques particulières, informations importantes..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="cancelAddClient()">
                            <i class="fas fa-times"></i> Annuler
                        </button>
                        <button type="button" class="btn btn-primary" onclick="previewClient()">
                            <i class="fas fa-eye"></i> Aperçu
                        </button>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> Enregistrer le client
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Aperçu du nouveau client</h3>
                <button class="close-modal" onclick="closePreviewModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="client-preview">
                    <div class="client-info-grid">
                        <div class="client-info-item">
                            <label>Société:</label>
                            <span id="previewSociety">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Gérant:</label>
                            <span id="previewManager">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Matricule fiscale:</label>
                            <span id="previewFiscalNumber">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Type:</label>
                            <span id="previewType">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Téléphone:</label>
                            <span id="previewPhone">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Email:</label>
                            <span id="previewEmail">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Adresse:</label>
                            <span id="previewAddress">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Localisation:</label>
                            <span id="previewLocation">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Mode de paiement:</label>
                            <span id="previewPaymentMode">-</span>
                        </div>
                        <div class="client-info-item">
                            <label>Statut du paiement:</label>
                            <span id="previewPaymentStatus">-</span>
                        </div>
                    </div>
                    <div class="client-notes" style="margin-top: 20px;">
                        <label style="font-weight: 600; color: #1c1e21;">Notes:</label>
                        <div id="previewNotes" style="margin-top: 10px; padding: 15px; background-color: #f0f2f5; border-radius: 8px; border: 1px solid #e4e6ea;">-</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePreviewModal()">
                    <i class="fas fa-edit"></i> Modifier
                </button>
                <button class="btn btn-success" onclick="confirmAddClient()">
                    <i class="fas fa-check"></i> Confirmer et enregistrer
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 style="color: #22c55e;">
                    <i class="fas fa-check-circle"></i> Client ajouté avec succès
                </h3>
                <button class="close-modal" onclick="closeSuccessModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>Le nouveau client a été ajouté avec succès à la base de données.</p>
                <p>Que souhaitez-vous faire maintenant ?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="addAnotherClient()">
                    <i class="fas fa-plus"></i> Ajouter un autre client
                </button>
                <button class="btn btn-secondary" onclick="goToClientsList()">
                    <i class="fas fa-list"></i> Voir la liste des clients
                </button>
            </div>
        </div>
    </div>

    <script src="../js/template.js"></script>
    <script src="../js/navigation.js"></script>
    <script src="../js/ajouter-client.js"></script>
</body>
</html>
